{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\patha\\\\OneDrive\\\\Desktop\\\\Inventra Project\\\\Inventra - Inventory Management System\\\\Inventra---Inventory-Management-System\\\\frontend\\\\src\\\\components\\\\Register.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./Register.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n  const nav = useNavigate();\n  const token = localStorage.getItem(\"token\");\n  const [user, setUser] = useState({\n    name: \"\",\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    role: \"STAFF\"\n  });\n  const [otp, setOtp] = useState(\"\");\n  const [otpSent, setOtpSent] = useState(false);\n\n  // ================= SEND OTP =================\n  const sendOtp = async () => {\n    if (!user.email) {\n      alert(\"Enter email first\");\n      return;\n    }\n    try {\n      await axios.post(\"http://localhost:8080/api/auth/send-otp\", {\n        email: user.email\n      } // ✔ backend should accept this\n      );\n      alert(\"OTP sent (check backend console)\");\n      setOtpSent(true);\n    } catch (err) {\n      alert(\"Failed to send OTP\");\n    }\n  };\n\n  // ================= REGISTER =================\n  const register = async () => {\n    if (user.password !== user.confirmPassword) {\n      alert(\"Passwords do not match\");\n      return;\n    }\n    if (!otp) {\n      alert(\"Enter OTP\");\n      return;\n    }\n    try {\n      await axios.post(\"http://localhost:8080/api/auth/register\", user, {\n        params: {\n          otp\n        },\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert(\"User registered successfully\");\n      nav(\"/inventory\");\n    } catch (err) {\n      alert(\"Registration failed\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-box\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Register User\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Full Name\",\n      onChange: e => setUser({\n        ...user,\n        name: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Username\",\n      autoComplete: \"username\",\n      onChange: e => setUser({\n        ...user,\n        username: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"email\",\n      placeholder: \"Email\",\n      autoComplete: \"email\",\n      onChange: e => setUser({\n        ...user,\n        email: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: user.role,\n      onChange: e => setUser({\n        ...user,\n        role: e.target.value\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"STAFF\",\n        children: \"Staff\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"ADMIN\",\n        children: \"Admin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      placeholder: \"Password\",\n      autoComplete: \"new-password\",\n      onChange: e => setUser({\n        ...user,\n        password: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      placeholder: \"Confirm Password\",\n      autoComplete: \"new-password\",\n      onChange: e => setUser({\n        ...user,\n        confirmPassword: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), !otpSent && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-secondary\",\n      onClick: sendOtp,\n      children: \"Send OTP\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this), otpSent && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Enter OTP\",\n        onChange: e => setOtp(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: register,\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn\",\n      onClick: () => nav(\"/inventory\"),\n      children: \"Back to Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"2aFE2URGtRkhe+F1K0dwSPIjF8I=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["useState","axios","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","Register","_s","nav","token","localStorage","getItem","user","setUser","name","username","email","password","confirmPassword","role","otp","setOtp","otpSent","setOtpSent","sendOtp","alert","post","err","register","params","headers","Authorization","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","e","target","value","autoComplete","type","onClick","_c","$RefreshReg$"],"sources":["C:/Users/patha/OneDrive/Desktop/Inventra Project/Inventra - Inventory Management System/Inventra---Inventory-Management-System/frontend/src/components/Register.js"],"sourcesContent":["import { useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./Register.css\";\n\nexport default function Register() {\n  const nav = useNavigate();\n  const token = localStorage.getItem(\"token\");\n\n  const [user, setUser] = useState({\n    name: \"\",\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    role: \"STAFF\"\n  });\n\n  const [otp, setOtp] = useState(\"\");\n  const [otpSent, setOtpSent] = useState(false);\n\n  // ================= SEND OTP =================\n  const sendOtp = async () => {\n    if (!user.email) {\n      alert(\"Enter email first\");\n      return;\n    }\n\n    try {\n      await axios.post(\n        \"http://localhost:8080/api/auth/send-otp\",\n        { email: user.email }   // ✔ backend should accept this\n      );\n\n      alert(\"OTP sent (check backend console)\");\n      setOtpSent(true);\n\n    } catch (err) {\n      alert(\"Failed to send OTP\");\n    }\n  };\n\n  // ================= REGISTER =================\n  const register = async () => {\n    if (user.password !== user.confirmPassword) {\n      alert(\"Passwords do not match\");\n      return;\n    }\n\n    if (!otp) {\n      alert(\"Enter OTP\");\n      return;\n    }\n\n    try {\n      await axios.post(\n        \"http://localhost:8080/api/auth/register\",\n        user,\n        {\n          params: { otp },\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }\n      );\n\n      alert(\"User registered successfully\");\n      nav(\"/inventory\");\n\n    } catch (err) {\n      alert(\"Registration failed\");\n    }\n  };\n\n  return (\n    <div className=\"form-box\">\n      <h2>Register User</h2>\n\n      <input\n        placeholder=\"Full Name\"\n        onChange={e => setUser({ ...user, name: e.target.value })}\n      />\n\n      <input\n        placeholder=\"Username\"\n        autoComplete=\"username\"\n        onChange={e => setUser({ ...user, username: e.target.value })}\n      />\n\n      <input\n        type=\"email\"\n        placeholder=\"Email\"\n        autoComplete=\"email\"\n        onChange={e => setUser({ ...user, email: e.target.value })}\n      />\n\n      <select\n        value={user.role}\n        onChange={e => setUser({ ...user, role: e.target.value })}\n      >\n        <option value=\"STAFF\">Staff</option>\n        <option value=\"ADMIN\">Admin</option>\n      </select>\n\n      <input\n        type=\"password\"\n        placeholder=\"Password\"\n        autoComplete=\"new-password\"\n        onChange={e => setUser({ ...user, password: e.target.value })}\n      />\n\n      <input\n        type=\"password\"\n        placeholder=\"Confirm Password\"\n        autoComplete=\"new-password\"\n        onChange={e =>\n          setUser({ ...user, confirmPassword: e.target.value })\n        }\n      />\n\n      {!otpSent && (\n        <button className=\"btn btn-secondary\" onClick={sendOtp}>\n          Send OTP\n        </button>\n      )}\n\n      {otpSent && (\n        <>\n          <input\n            placeholder=\"Enter OTP\"\n            onChange={e => setOtp(e.target.value)}\n          />\n\n          <button className=\"btn btn-primary\" onClick={register}>\n            Register\n          </button>\n        </>\n      )}\n\n      <button className=\"btn\" onClick={() => nav(\"/inventory\")}>\n        Back to Dashboard\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}